<!DOCTYPE html>
<html lang="en">
<head th:replace="~{../static/fragments/head/head.html::head('Re:Donate', 'index')}"></head>
<body>
    <div id="container">
        <div th:replace="~{../static/fragments/header/header.html::headerLogin}"></div>

        <div id="lado"></div>

        <div th:if="${session.idLogin eq null}" id="login" class="rounded">
            <form action="/logar" method="POST">

                <div id="campos" class="mx-auto w-75 mt-2">

                    <h3>Email:</h3>
                    <div class="input-group mb-1 mx-auto">
                        <input type="email" class="form-control" aria-label="Email" name="emailUsuario">
                    </div>

                    <br/><br/>

                    <h3>Senha:</h3>
                    <div class="input-group mb-1 mx-auto">
                        <input type="password" class="form-control" aria-label="Senha" name="senhaUsuario">
                    </div>

                    <button type="submit" class="btn btn-sm mt-2 mb-3" id="enviar">Enviar</button>
                    <br/>
                </div>

                <p> Ainda não possui uma conta? <a href="/cadastrar"> Cadastre-se </a> </p>

            </form>
            <h4 th:if="${falhaLogin != null and falhaLogin}" id="errorMessage"> Falha ao efetuar login, tente novamente!</h4>
        </div>

        <div class="body-footer" id="footer" th:replace="~{../static/fragments/footer/footer.html::footerLogin}">
        </div>

    </div>

    <script th:inline="javascript">
        /*<![CDATA[*/

        const sucesso = /*[[${success}]]*/ 'resultado da doação';
        const denial = /*[[${accessDenial}]]*/ 'falha de acesso';
        const Pdenial = /*[[${permissionDenial}]]*/ 'falha de acesso, sem permissão';
        const notUnique = /*[[${notUnique}]]*/ 'email ja cadastrado';

        if (sucesso != null) {
            if (sucesso)
                window.alert("Cadastro efetuado com sucesso!");
            else
                window.alert("Erro ao efetuar cadastro!");
        };

        if(denial != null){
            if(denial)
                window.alert("Efetue login para acessar este conteúdo.");
        }

        if(Pdenial != null){
            window.alert("A página que você tentou acessar é reservada para usuários " + Pdenial + "!");
        }

        if(notUnique != null){
                window.alert(`${notUnique} inserido já está vinculado à uma conta!`);
        }

        /*]]>*/
    </script>
</body>
</html>